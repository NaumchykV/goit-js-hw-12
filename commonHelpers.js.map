{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45140381-2d1d7d148fe8b2b4910dcca17';\n\nexport default async function searchImages(query, page = 1) {\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    // iziToast.error({\n    //   position: 'topRight',\n    //   message: `${error}`,\n    // });\n  }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createImages(data) {\n  let gallery = new SimpleLightbox('.gallery a', {\n    overlay: false,\n    overlayOpacity: 0.7,\n    nav: true,\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 350,\n  });\n  const container = document.querySelector('.gallery');\n  let images = data.hits\n    .map(\n      hit =>\n        `<div class=\"gallery-list\">\n      <a href=\"${hit.largeImageURL}\">\n      <img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n      </a>\n      <div class =\"gallery-list-text\">\n      <div class=\"gallery-list-stat\">\n      <h5>likes</h5>\n      <p>${hit.likes}</p></div>\n      <div class=\"gallery-list-stat\">\n      <h5>views</h5>\n      <p>${hit.views}</p></div>\n      <div class=\"gallery-list-stat\">\n      <h5>comments</h5>\n      <p>${hit.comments}</p></div>\n      <div class=\"gallery-list-stat\">\n      <h5>downloads</h5>\n      <p>${hit.downloads}</p></div></div></div>`\n    )\n    .join('');\n  container.insertAdjacentHTML('beforeend', images);\n  gallery.refresh();\n}\n\nexport function clearImages() {\n  const container = document.querySelector('.gallery');\n  container.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport searchImages from './js/pixabay-api';\nimport { createImages, clearImages } from './js/render-functions';\n\nconst form = document.querySelector('.gallery-form');\nconst input = document.querySelector('.gallery-input');\nconst loader = document.querySelector('.loader');\nconst bmloader =document.querySelector('.load-more-loader') \nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\nlet searchWord = '';\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nconst params = {\n  page: 1,\n  q: \"\",\n  per_page: 15,\n};\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  clearImages();\n  \n  searchWord = input.value.trim();\n  params.page = 1;\n\n  if (searchWord === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please fill the input',\n    });\n    loader.classList.add('hidden');\n    loadMoreBtn.classList.add('is-hidden');\n    form.reset()\n    return;\n  }\n  loader.classList.remove('hiden');\ntry {\n  const data = await searchImages(searchWord);\n  if (data.total === 0) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    loadMoreBtn.classList.add('is-hidden');\n  } else {\n    await createImages(data);\n    if (data.total <= 15) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loader.classList.add('hidden');}\n    \n    else {loadMoreBtn.classList.remove('is-hidden');}\n  }\n  loader.classList.add('hiden');}\n catch (error) {\n  iziToast.error({\n            position: 'topRight',\n            message:\n              'Something went wrong. Please try again later',\n          });\n          loader.classList.add('hiden');\n          loadMoreBtn.classList.add('is-hidden');\n}\nfinally {\n  form.reset();\n}\n}\n\nasync function handleLoadMore() {\n  params.page += 1;\n  \n  loadMoreBtn.classList.add('is-hidden');\n  bmloader.classList.remove('hiden');\n  try {\n  const data = await searchImages(searchWord, params.page);\n  createImages(data);\n  const galleryCard = document.querySelector('.gallery-list');\n  const cardHeight = galleryCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: (cardHeight + 24) * 5,\n    behavior: 'smooth'\n  });\n\n    if (params.page * params.per_page >= data.totalHits) {\n    loadMoreBtn.classList.add('is-hidden');\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n        }\n        else {loadMoreBtn.classList.remove('is-hidden');}}\n  catch (error) {\n    iziToast.error({\n              position: 'topRight',\n              message:\n                'Something went srong. Please try again later.',\n            });\n            bmloader.classList.add('hiden');\n  \n  }\n  finally {\n  bmloader.classList.add('hiden')\n}}\n\n\n\n\n\n\n\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\n// import searchImages from './js/pixabay-api';\n// import { createImages, clearImages } from './js/render-functions';\n\n// const form = document.querySelector('.gallery-form');\n// const input = document.querySelector('.gallery-input');\n// const loader = document.querySelector('.loader');\n// const bmloader =document.querySelector('.load-more-loader') \n// const loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n// let searchWord = '';\n\n// form.addEventListener('submit', handleSubmit);\n// loadMoreBtn.addEventListener('click', handleLoadMore);\n\n// const params = {\n//   page: 1,\n//   q: \"\",\n//   per_page: 15,\n// };\n\n// async function handleSubmit(event) {\n//   event.preventDefault();\n//   clearImages();\n  \n//   searchWord = input.value.trim();\n//   params.page = 1;\n\n//   if (searchWord === '') {\n//     iziToast.error({\n//       position: 'topRight',\n//       message: 'Please fill the input',\n//     });\n//     loader.classList.add('hidden');\n//     loadMoreBtn.classList.add('is-hidden');\n//     form.reset()\n//     return;\n//   }\n//   loader.classList.remove('hiden');\n// try {\n//   const data = await searchImages(searchWord);\n//   if (data.total === 0) {\n//     iziToast.error({\n//       position: 'topRight',\n//       message: 'Sorry, there are no images matching your search query. Please try again!',\n//     });\n//     loadMoreBtn.classList.add('is-hidden');\n//   } else {\n//     await createImages(data);\n//     loadMoreBtn.classList.remove('is-hidden');\n//   }\n//   if (data.total <=15) {\n//     loadMoreBtn.classList.add('is-hidden')\n//     iziToast.info({\n//       position: 'topRight',\n//       message: \"We're sorry, but you've reached the end of search results.\",\n//   })\n//     loader.classList.add('hiden');\n//  catch (error) {\n//   iziToast.error({\n//             position: 'topRight',\n//             message:\n//               'Something went wrong. Please try again later.',\n//           });\n//           loader.classList.add('hiden');\n\n// }\n// finally {\n//   form.reset();\n// }\n// }\n\n// async function handleLoadMore() {\n//   params.page += 1;\n  \n//   loadMoreBtn.classList.add('is-hidden');\n//   bmloader.classList.remove('hiden');\n//   try {\n//   const data = await searchImages(searchWord, params.page);\n//   createImages(data);\n//   const galleryCard = document.querySelector('.gallery-list');\n//   const cardHeight = galleryCard.getBoundingClientRect().height;\n\n//   window.scrollBy({\n//     top: (cardHeight + 24) * 5,\n//     behavior: 'smooth'\n//   });\n\n//     if (params.page * params.per_page >= data.totalHits) {\n//     loadMoreBtn.classList.add('is-hidden');\n//     iziToast.info({\n//       position: 'topRight',\n//       message: \"We're sorry, but you've reached the end of search results.\",\n//     });\n//         }\n//         else {loadMoreBtn.classList.remove('is-hidden');}}\n//   catch (error) {\n//     iziToast.error({\n//               position: 'topRight',\n//               message:\n//                 'Виникла помилка під час отримання зображень. Будь ласка, спробуйте пізніше.',\n//             });\n//             bmloader.classList.add('hiden');\n  \n//   }\n//   finally {\n//   bmloader.classList.add('hiden')\n// }}"],"names":["URL","API_KEY","searchImages","query","page","axios","createImages","data","gallery","SimpleLightbox","container","images","hit","clearImages","form","input","loader","bmloader","loadMoreBtn","searchWord","handleSubmit","handleLoadMore","params","event","iziToast","cardHeight"],"mappings":"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"}